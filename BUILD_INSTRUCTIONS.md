# Build Instructions for Dual Monitor GUI

## Prerequisites

Ensure you have the following installed:
- Qt 5.15 or later
- QGIS development libraries (qgis-dev)
- g++ compiler
- qmake (Qt build tool)

## Build Steps

### 1. Clean Previous Build (Optional)
```bash
cd /workspace
make clean
```

### 2. Regenerate Makefile
```bash
# Use the appropriate qmake command for your system
qmake RadarDisplay.pro
# OR
/usr/lib/qt5/bin/qmake RadarDisplay.pro
# OR
qmake-qt5 RadarDisplay.pro
```

### 3. Compile the Application
```bash
make -j$(nproc)
```

### 4. Run the Application
```bash
../bin/RadarDisplay
```

## New Files Added

The following files have been created for the dual-monitor GUI enhancement:

1. **MapDisplay/cppiwindow.h** - PPI Window header
2. **MapDisplay/cppiwindow.cpp** - PPI Window implementation
3. **MapDisplay/ccontrolswindow.h** - Controls Window header
4. **MapDisplay/ccontrolswindow.cpp** - Controls Window implementation

These files are already included in `RadarDisplay.pro`, so the build system will automatically compile them.

## Modified Files

The following existing files have been modified:

1. **cmapmainwindow.h** - Refactored for dual-window management
2. **cmapmainwindow.cpp** - Refactored implementation
3. **MapDisplay/ctracktablewidget.cpp** - Updated with light theme styling
4. **globalstructs.h** - Enhanced track structure with history management
5. **RadarDisplay.pro** - Updated with new source files

## Troubleshooting

### qmake not found
If you get "qmake: command not found", try:
```bash
# Find qmake location
find /usr -name qmake 2>/dev/null

# Use full path
/usr/lib/qt5/bin/qmake RadarDisplay.pro

# Or add to PATH
export PATH=/usr/lib/qt5/bin:$PATH
qmake RadarDisplay.pro
```

### Missing QGIS libraries
If you get errors about missing QGIS libraries:
```bash
# Ubuntu/Debian
sudo apt-get install qgis-dev libqgis-dev

# Check library paths
ldconfig -p | grep qgis
```

### Compilation errors
If you encounter compilation errors:
1. Ensure all header files are in place
2. Check that QGIS development libraries are installed
3. Verify Qt version compatibility
4. Run `make clean` before rebuilding

### Missing dependencies
If you're missing other dependencies:
```bash
# Ubuntu/Debian
sudo apt-get install qt5-default libqt5charts5-dev

# Check installed Qt modules
dpkg -l | grep qt5
```

## Verification

After building, verify the application:

1. **Check executable exists**:
   ```bash
   ls -lh ../bin/RadarDisplay
   ```

2. **Check for symbols** (optional):
   ```bash
   nm ../bin/RadarDisplay | grep -i "ppiwindow"
   nm ../bin/RadarDisplay | grep -i "controlswindow"
   ```

3. **Run in verbose mode** (if available):
   ```bash
   QT_LOGGING_RULES="*.debug=true" ../bin/RadarDisplay
   ```

## Notes

- The Makefile is auto-generated by qmake based on `RadarDisplay.pro`
- Changes to source files require running `make` but not regenerating Makefile
- Changes to `.pro` file or new files require running `qmake` again
- Build artifacts are placed in `../obj/` directory
- Final executable is in `../bin/` directory

## IDE Integration

### Qt Creator
1. Open `RadarDisplay.pro` in Qt Creator
2. Configure project with appropriate Qt kit
3. Build and run from IDE

### VS Code
1. Install Qt extension
2. Open workspace folder
3. Configure tasks.json to run qmake and make
4. Build with Ctrl+Shift+B

### CLion
1. Open as CMake project (or use qmake support plugin)
2. Configure Qt paths in settings
3. Build from IDE

## Success Indicators

You'll know the build succeeded when:
- No compilation errors in output
- Executable created at `../bin/RadarDisplay`
- Application launches with two windows (PPI and Controls)
- Light blue theme is applied throughout
- All tabs and controls are accessible

## Next Steps

After successful build:
1. Review `DUAL_MONITOR_GUI_SUMMARY.md` for feature overview
2. Test dual-monitor functionality
3. Verify all context menu options work
4. Test settings button functionality
5. Confirm light theme consistency across all widgets
